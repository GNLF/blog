(window.webpackJsonp=window.webpackJsonp||[]).push([[403],{280:function(e,s,a){"use strict";a.r(s);var n=a(17),r=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"响应显示区域变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应显示区域变化"}},[e._v("#")]),e._v(" 响应显示区域变化")]),e._v(" "),a("h2",{attrs:{id:"显示区域尺寸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示区域尺寸"}},[e._v("#")]),e._v(" 显示区域尺寸")]),e._v(" "),a("p",[e._v("显示区域指小程序界面中可以自由布局展示的区域。在默认情况下，小程序显示区域的尺寸自页面初始化起就不会发生变化。但以下两种方式都可以改变这一默认行为。")]),e._v(" "),a("h3",{attrs:{id:"在手机上启用屏幕旋转支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在手机上启用屏幕旋转支持"}},[e._v("#")]),e._v(" 在手机上启用屏幕旋转支持")]),e._v(" "),a("p",[e._v("从小程序基础库版本 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.4.0"),a("OutboundLink")],1),e._v(" 开始，小程序在手机上支持屏幕旋转。使小程序中的页面支持屏幕旋转的方法是：在 "),a("code",[e._v("app.json")]),e._v(" 的 "),a("code",[e._v("window")]),e._v(" 段中设置 "),a("code",[e._v('"pageOrientation": "auto"')]),e._v(" ，或在页面 json 文件中配置 "),a("code",[e._v('"pageOrientation": "auto"')]),e._v(" 。")]),e._v(" "),a("p",[e._v("以下是在单个页面 json 文件中启用屏幕旋转的示例。")]),e._v(" "),a("p",[a("strong",[e._v("代码示例：")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "pageOrientation": "auto"\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("如果页面添加了上述声明，则在屏幕旋转时，这个页面将随之旋转，显示区域尺寸也会随着屏幕旋转而变化。")]),e._v(" "),a("p",[e._v("从小程序基础库版本 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.5.0"),a("OutboundLink")],1),e._v(" 开始， "),a("code",[e._v("pageOrientation")]),e._v(" 还可以被设置为 "),a("code",[e._v("landscape")]),e._v(" ，表示固定为横屏显示。")]),e._v(" "),a("h3",{attrs:{id:"在-ipad-上启用屏幕旋转支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-ipad-上启用屏幕旋转支持"}},[e._v("#")]),e._v(" 在 iPad 上启用屏幕旋转支持")]),e._v(" "),a("p",[e._v("从小程序基础库版本 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.3.0"),a("OutboundLink")],1),e._v(" 开始，在 iPad 上运行的小程序可以支持屏幕旋转。使小程序支持 iPad 屏幕旋转的方法是：在 "),a("code",[e._v("app.json")]),e._v(" 中添加 "),a("code",[e._v('"resizable": true')]),e._v(" 。")]),e._v(" "),a("p",[a("strong",[e._v("代码示例：")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "resizable": true\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("如果小程序添加了上述声明，则在屏幕旋转时，小程序将随之旋转，显示区域尺寸也会随着屏幕旋转而变化。注意：在 iPad 上不能单独配置某个页面是否支持屏幕旋转。")]),e._v(" "),a("h2",{attrs:{id:"media-query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#media-query"}},[e._v("#")]),e._v(" Media Query")]),e._v(" "),a("p",[e._v("有时，对于不同尺寸的显示区域，页面的布局会有所差异。此时可以使用 media query 来解决大多数问题。")]),e._v(" "),a("p",[a("strong",[e._v("代码示例：")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(".my-class {\n  width: 40px;\n}\n\n@media (min-width: 480px) {\n  /* 仅在 480px 或更宽的屏幕上生效的样式规则 */\n  .my-class {\n    width: 200px;\n  }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h2",{attrs:{id:"屏幕旋转事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#屏幕旋转事件"}},[e._v("#")]),e._v(" 屏幕旋转事件")]),e._v(" "),a("p",[e._v("有时，仅仅使用 media query 无法控制一些精细的布局变化。此时可以使用 js 作为辅助。")]),e._v(" "),a("p",[e._v("在 js 中读取页面的显示区域尺寸，可以使用 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/SelectorQuery.selectViewport.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("selectorQuery.selectViewport"),a("OutboundLink")],1),e._v(" 。")]),e._v(" "),a("p",[e._v("页面尺寸发生改变的事件，可以使用页面的 "),a("code",[e._v("onResize")]),e._v(" 来监听。对于自定义组件，可以使用 resize 生命周期来监听。回调函数中将返回显示区域的尺寸信息。（从基础库版本 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.4.0"),a("OutboundLink")],1),e._v(" 开始支持。）")]),e._v(" "),a("p",[a("strong",[e._v("代码示例：")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Page({\n  onResize(res) {\n    res.size.windowWidth // 新的显示区域宽度\n    res.size.windowHeight // 新的显示区域高度\n  }\n})\nComponent({\n  pageLifetimes: {\n    resize(res) {\n      res.size.windowWidth // 新的显示区域宽度\n      res.size.windowHeight // 新的显示区域高度\n    }\n  }\n})\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("p",[e._v("此外，还可以使用 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/wx.onWindowResize.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("wx.onWindowResize")]),a("OutboundLink")],1),e._v(" 来监听（但这不是推荐的方式）。")]),e._v(" "),a("p",[a("strong",[e._v("Bug & tips:")])]),e._v(" "),a("ul",[a("li",[e._v("Bug： Android 微信版本 6.7.3 中， "),a("code",[e._v("live-pusher")]),e._v(" 组件在屏幕旋转时方向异常。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);