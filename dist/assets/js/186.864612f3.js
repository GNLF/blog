(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{567:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer"}},[t._v("#")]),t._v(" Buffer")]),t._v(" "),a("p",[t._v("JavaScript对字符串处理十分友好，无论是宽字节还是单字节字符串，都被认为是一个字符串。Node中需要处理网络协议、操作数据库、处理图片、文件上传等，还需要处理大量二进制数据，自带的字符串远不能满足这些要求，因此Buffer应运而生。")]),t._v(" "),a("h2",{attrs:{id:"buffer结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer结构"}},[t._v("#")]),t._v(" Buffer结构")]),t._v(" "),a("p",[t._v("Buffer是一个典型的Javascript和C++结合的模块，性能相关部分用C++实现，非性能相关部分用javascript实现。")]),t._v(" "),a("p",[t._v("node在进程启动时Buffer就已经加装进入内存，并将其放入全局对象，因此无需require")]),t._v(" "),a("p",[t._v("Buffer对象：类似于数组，其元素是16进制的两位数。")]),t._v(" "),a("h3",{attrs:{id:"字节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字节"}},[t._v("#")]),t._v(" 字节")]),t._v(" "),a("ul",[a("li",[t._v("1024b = 1k")]),t._v(" "),a("li",[t._v("8bit = 1b")]),t._v(" "),a("li",[t._v("一个汉字3b")]),t._v(" "),a("li",[t._v("一个字节转化成十进制最大是255")]),t._v(" "),a("li",[t._v("一个字节转化成十六进制最大是FF")])]),t._v(" "),a("h2",{attrs:{id:"什么时候用buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么时候用buffer"}},[t._v("#")]),t._v(" 什么时候用Buffer")]),t._v(" "),a("p",[t._v("纯粹的javascript支持unicode码而对二进制不是很支持，当解决TCP流或者文件流的时候，处理流是有必要的，我们保存非utf-8字符串，2进制等等其他格式的时候，我们就必须得使用”Buffer“。")]),t._v(" "),a("h2",{attrs:{id:"buffer的转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer的转换"}},[t._v("#")]),t._v(" Buffer的转换")]),t._v(" "),a("p",[t._v("Buffer对象可以和字符串相互转换，支持的编码类型如下： ASCII、UTF-8、Base64、Binary(二进制)、Hex(十六进制)")]),t._v(" "),a("h2",{attrs:{id:"buffer使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer使用"}},[t._v("#")]),t._v(" Buffer使用")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Buffer.from(array)")]),t._v(" "),a("td",[t._v("创建")]),t._v(" "),a("td",[t._v("array 创建一个新的 Buffer")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.from(string[,encoding])")]),t._v(" "),a("td",[t._v("创建")]),t._v(" "),a("td",[t._v("新建一个包含所给的 JavaScript 字符串 string 的 Buffer 。 encoding 参数指定 string 的字符编码。")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.alloc(size[,val[,encoding]])")]),t._v(" "),a("td",[t._v("创建")]),t._v(" "),a("td",[t._v("分配一个大小为 size 字节的新建的 Buffer 。 如果 fill 为 undefined ，则该 Buffer 会用 0 填充。")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.concat(list[,totallength])")]),t._v(" "),a("td",[t._v("合并")]),t._v(" "),a("td",[t._v("返回一个合并了 list 中所有 Buffer 实例的新建的 Buffer")])]),t._v(" "),a("tr",[a("td",[t._v("buf.toString([encoding], [start], [end])")]),t._v(" "),a("td",[t._v("返回")]),t._v(" "),a("td",[t._v("根据 encoding 指定的字符编码解码 buf 成一个字符串。")])]),t._v(" "),a("tr",[a("td",[t._v("buf.toJSON()")]),t._v(" "),a("td",[t._v("返回")]),t._v(" "),a("td",[t._v("返回 buf 的 JSON 格式。")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.isEncoding(encoding)")]),t._v(" "),a("td",[t._v("检测")]),t._v(" "),a("td",[t._v("如果 encoding 是一个支持的字符编码则返回 true，否则返回 false 。")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.isBuffer(obj)")]),t._v(" "),a("td",[t._v("检测")]),t._v(" "),a("td",[t._v("如果 obj 是一个 Buffer 则返回 true ，否则返回 false 。")])]),t._v(" "),a("tr",[a("td",[t._v("Buffer.byteLength(buf)")]),t._v(" "),a("td",[t._v("获取")]),t._v(" "),a("td",[t._v("获取字节长度")])]),t._v(" "),a("tr",[a("td",[t._v("buf.equals(otherBuffer)")]),t._v(" "),a("td",[t._v("检测")]),t._v(" "),a("td",[t._v("如果 buf 与 otherBuffer 具有完全相同的字节，则返回 true，否则返回 false。")])]),t._v(" "),a("tr",[a("td",[t._v("buf.fill(any)")]),t._v(" "),a("td",[t._v("填充")]),t._v(" "),a("td",[t._v("用数据填充buf，any为0，可视为初始化buf")])]),t._v(" "),a("tr",[a("td",[t._v("buf.slice()")]),t._v(" "),a("td",[t._v("截取")]),t._v(" "),a("td",[t._v("是浅拷贝")])])])]),t._v(" "),a("h3",{attrs:{id:"创建buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建buffer"}},[t._v("#")]),t._v(" 创建Buffer")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alloc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"字符串转buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串转buffer"}},[t._v("#")]),t._v(" 字符串转Buffer")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("# 默认"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UTF")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\nBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"buffer转字符串"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer转字符串"}},[t._v("#")]),t._v(" Buffer转字符串")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"拼接buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拼接buffer"}},[t._v("#")]),t._v(" 拼接Buffer")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("totallength"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"buffer不支持的编码类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer不支持的编码类型"}},[t._v("#")]),t._v(" Buffer不支持的编码类型")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"判断是不是buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断是不是buffer"}},[t._v("#")]),t._v(" 判断是不是Buffer")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"获取字节长度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取字节长度"}},[t._v("#")]),t._v(" 获取字节长度")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("byteLength")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"判断两个buffer字节是否相同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断两个buffer字节是否相同"}},[t._v("#")]),t._v(" 判断两个Buffer字节是否相同")]),t._v(" "),a("p",[t._v("如果 buf 与 otherBuffer 具有完全相同的字节，则返回 true，否则返回 false。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("otherBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"对象的拷贝"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对象的拷贝"}},[t._v("#")]),t._v(" 对象的拷贝")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("深拷贝")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringfiy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//缺点  不能拷贝方法，只能拷贝属性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("递归拷贝\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("浅拷贝")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("数组"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slice   Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assgin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);