(window.webpackJsonp=window.webpackJsonp||[]).push([[417],{266:function(e,a,s){"use strict";s.r(a);var t=s(17),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"behaviors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#behaviors"}},[e._v("#")]),e._v(" behaviors")]),e._v(" "),s("h2",{attrs:{id:"定义和使用-behaviors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义和使用-behaviors"}},[e._v("#")]),e._v(" 定义和使用 behaviors")]),e._v(" "),s("p",[s("code",[e._v("behaviors")]),e._v(" 是用于组件间代码共享的特性，类似于一些编程语言中的“mixins”或“traits”。")]),e._v(" "),s("p",[e._v("每个 "),s("code",[e._v("behavior")]),e._v(" 可以包含一组属性、数据、生命周期函数和方法，组件引用它时，它的属性、数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。每个组件可以引用多个 "),s("code",[e._v("behavior")]),e._v(" 。 "),s("code",[e._v("behavior")]),e._v(" 也可以引用其他 "),s("code",[e._v("behavior")]),e._v(" 。")]),e._v(" "),s("p",[s("code",[e._v("behavior")]),e._v(" 需要使用 "),s("code",[e._v("Behavior()")]),e._v(" 构造器定义。")]),e._v(" "),s("p",[s("strong",[e._v("代码示例：")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// my-behavior.js\nmodule.exports = Behavior({\n  behaviors: [],\n  properties: {\n    myBehaviorProperty: {\n      type: String\n    }\n  },\n  data: {\n    myBehaviorData: {}\n  },\n  attached() {},\n  methods: {\n    myBehaviorMethod() {}\n  }\n})\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br")])]),s("p",[e._v("组件引用时，在 "),s("code",[e._v("behaviors")]),e._v(" 定义段中将它们逐个列出即可。")]),e._v(" "),s("p",[s("strong",[e._v("代码示例：")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/s/6SfsUKmE6iZC",target:"_blank",rel:"noopener noreferrer"}},[e._v("在开发者工具中预览效果"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// my-component.js\nconst myBehavior = require('my-behavior')\nComponent({\n  behaviors: [myBehavior],\n  properties: {\n    myProperty: {\n      type: String\n    }\n  },\n  data: {\n    myData: {}\n  },\n  attached() {},\n  methods: {\n    myMethod() {}\n  }\n})\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br")])]),s("p",[e._v("在上例中， "),s("code",[e._v("my-component")]),e._v(" 组件定义中加入了 "),s("code",[e._v("my-behavior")]),e._v(" ，而 "),s("code",[e._v("my-behavior")]),e._v(" 中包含有 "),s("code",[e._v("myBehaviorProperty")]),e._v(" 属性、 "),s("code",[e._v("myBehaviorData")]),e._v(" 数据字段、 "),s("code",[e._v("myBehaviorMethod")]),e._v(" 方法和一个 "),s("code",[e._v("attached")]),e._v(" 生命周期函数。这将使得 "),s("code",[e._v("my-component")]),e._v(" 中最终包含 "),s("code",[e._v("myBehaviorProperty")]),e._v(" 、 "),s("code",[e._v("myProperty")]),e._v(" 两个属性， "),s("code",[e._v("myBehaviorData")]),e._v(" 、 "),s("code",[e._v("myData")]),e._v(" 两个数据字段，和 "),s("code",[e._v("myBehaviorMethod")]),e._v(" 、 "),s("code",[e._v("myMethod")]),e._v(" 两个方法。当组件触发 "),s("code",[e._v("attached")]),e._v(" 生命周期时，会依次触发 "),s("code",[e._v("my-behavior")]),e._v(" 中的 "),s("code",[e._v("attached")]),e._v(" 生命周期函数和 "),s("code",[e._v("my-component")]),e._v(" 中的 "),s("code",[e._v("attached")]),e._v(" 生命周期函数。")]),e._v(" "),s("h2",{attrs:{id:"字段的覆盖和组合规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段的覆盖和组合规则"}},[e._v("#")]),e._v(" 字段的覆盖和组合规则")]),e._v(" "),s("p",[e._v("组件和它引用的 "),s("code",[e._v("behavior")]),e._v(" 中可以包含同名的字段，对这些字段的处理方法如下：")]),e._v(" "),s("ul",[s("li",[e._v("如果有同名的属性或方法，组件本身的属性或方法会覆盖 "),s("code",[e._v("behavior")]),e._v(" 中的属性或方法，如果引用了多个 "),s("code",[e._v("behavior")]),e._v(" ，在定义段中靠后 "),s("code",[e._v("behavior")]),e._v(" 中的属性或方法会覆盖靠前的属性或方法；")]),e._v(" "),s("li",[e._v("如果有同名的数据字段，如果数据是对象类型，会进行对象合并，如果是非对象类型则会进行相互覆盖；")]),e._v(" "),s("li",[e._v("生命周期函数不会相互覆盖，而是在对应触发时机被逐个调用。如果同一个 "),s("code",[e._v("behavior")]),e._v(" 被一个组件多次引用，它定义的生命周期函数只会被执行一次。")])]),e._v(" "),s("h2",{attrs:{id:"内置-behaviors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内置-behaviors"}},[e._v("#")]),e._v(" 内置 behaviors")]),e._v(" "),s("p",[e._v("自定义组件可以通过引用内置的 "),s("code",[e._v("behavior")]),e._v(" 来获得内置组件的一些行为。")]),e._v(" "),s("p",[s("strong",[e._v("代码示例：")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/s/JgF61qmL69YR",target:"_blank",rel:"noopener noreferrer"}},[e._v("在开发者工具中预览效果"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Component({\n  behaviors: ['wx://form-field']\n})\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("在上例中， "),s("code",[e._v("wx://form-field")]),e._v(" 代表一个内置 "),s("code",[e._v("behavior")]),e._v(" ，它使得这个自定义组件有类似于表单控件的行为。")]),e._v(" "),s("p",[e._v("内置 "),s("code",[e._v("behavior")]),e._v(" 往往会为组件添加一些属性。在没有特殊说明时，组件可以覆盖这些属性来改变它的 "),s("code",[e._v("type")]),e._v(" 或添加 "),s("code",[e._v("observer")]),e._v(" 。")]),e._v(" "),s("h3",{attrs:{id:"wx-form-field"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-form-field"}},[e._v("#")]),e._v(" wx://form-field")]),e._v(" "),s("p",[e._v("使自定义组件有类似于表单控件的行为。 form 组件可以识别这些自定义组件，并在 submit 事件中返回组件的字段名及其对应字段值。这将为它添加以下两个属性。")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("属性名")]),e._v(" "),s("th",[e._v("类型")]),e._v(" "),s("th",[e._v("描述")]),e._v(" "),s("th",[e._v("最低版本")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("name")]),e._v(" "),s("td",[e._v("String")]),e._v(" "),s("td",[e._v("在表单中的字段名")]),e._v(" "),s("td",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("1.6.7"),s("OutboundLink")],1)])]),e._v(" "),s("tr",[s("td",[e._v("value")]),e._v(" "),s("td",[e._v("任意")]),e._v(" "),s("td",[e._v("在表单中的字段值")]),e._v(" "),s("td",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("1.6.7"),s("OutboundLink")],1)])])])]),e._v(" "),s("h3",{attrs:{id:"wx-component-export"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-component-export"}},[e._v("#")]),e._v(" wx://component-export")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/s/ZtosuRmK741Y",target:"_blank",rel:"noopener noreferrer"}},[e._v("在开发者工具中预览效果"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("从基础库版本 "),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("2.2.3"),s("OutboundLink")],1),e._v(" 开始提供支持。")]),e._v(" "),s("p",[e._v("使自定义组件支持 "),s("code",[e._v("export")]),e._v(" 定义段。这个定义段可以用于指定组件被 "),s("code",[e._v("selectComponent")]),e._v(" 调用时的返回值。")]),e._v(" "),s("p",[e._v("未使用这个定义段时， "),s("code",[e._v("selectComponent")]),e._v(" 将返回自定义组件的 "),s("code",[e._v("this")]),e._v(" （插件的自定义组件将返回 "),s("code",[e._v("null")]),e._v(" ）。使用这个定义段时，将以这个定义段的函数返回值代替。")]),e._v(" "),s("p",[e._v("代码示例：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// 自定义组件 my-component 内部\nComponent({\n  behaviors: ['wx://component-export'],\n  export() {\n    return {myField: 'myValue'}\n  }\n})\n\x3c!-- 使用自定义组件时 --\x3e\n<my-component id=\"the-id\" />\nthis.selectComponent('#the-id') // 等于 { myField: 'myValue' }\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);