(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{277:function(s,e,a){"use strict";a.r(e);var n=a(17),r=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"wxs-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wxs-模块"}},[s._v("#")]),s._v(" WXS 模块")]),s._v(" "),a("p",[s._v("WXS 代码可以编写在 wxml 文件中的 "),a("code",[s._v("<wxs>")]),s._v(" 标签内，或以 "),a("code",[s._v(".wxs")]),s._v(" 为后缀名的文件内。")]),s._v(" "),a("h2",{attrs:{id:"模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块"}},[s._v("#")]),s._v(" 模块")]),s._v(" "),a("p",[s._v("每一个 "),a("code",[s._v(".wxs")]),s._v(" 文件和 "),a("code",[s._v("<wxs>")]),s._v(" 标签都是一个单独的模块。")]),s._v(" "),a("p",[s._v("每个模块都有自己独立的作用域。即在一个模块里面定义的变量与函数，默认为私有的，对其他模块不可见。")]),s._v(" "),a("p",[s._v("一个模块要想对外暴露其内部的私有变量与函数，只能通过 "),a("code",[s._v("module.exports")]),s._v(" 实现。")]),s._v(" "),a("h2",{attrs:{id:"wxs-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wxs-文件"}},[s._v("#")]),s._v(" .wxs 文件")]),s._v(" "),a("p",[s._v("在"),a("strong",[s._v("微信开发者工具")]),s._v("里面，右键可以直接创建 "),a("code",[s._v(".wxs")]),s._v(" 文件，在其中直接编写 WXS 脚本。")]),s._v(" "),a("p",[a("strong",[s._v("示例代码：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// /pages/comm.wxs\n\nvar foo = \"'hello world' from comm.wxs\";\nvar bar = function(d) {\n  return d;\n}\nmodule.exports = {\n  foo: foo,\n  bar: bar\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("上述例子在 "),a("code",[s._v("/pages/comm.wxs")]),s._v(" 的文件里面编写了 WXS 代码。该 "),a("code",[s._v(".wxs")]),s._v(" 文件可以被其他的 "),a("code",[s._v(".wxs")]),s._v(" 文件 或 WXML 中的 "),a("code",[s._v("<wxs>")]),s._v(" 标签引用。")]),s._v(" "),a("h3",{attrs:{id:"module-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-对象"}},[s._v("#")]),s._v(" module 对象")]),s._v(" "),a("p",[s._v("每个 "),a("code",[s._v("wxs")]),s._v(" 模块均有一个内置的 "),a("code",[s._v("module")]),s._v(" 对象。")]),s._v(" "),a("h4",{attrs:{id:"属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[s._v("#")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("exports")]),s._v(": 通过该属性，可以对外共享本模块的私有变量与函数。")])]),s._v(" "),a("p",[a("strong",[s._v("示例代码：")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/s/KYgu1Km36pZP",target:"_blank",rel:"noopener noreferrer"}},[s._v("在开发者工具中预览效果"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// /pages/tools.wxs\n\nvar foo = "\'hello world\' from tools.wxs";\nvar bar = function (d) {\n  return d;\n}\nmodule.exports = {\n  FOO: foo,\n  bar: bar,\n};\nmodule.exports.msg = "some msg";\n\x3c!-- page/index/index.wxml --\x3e\n\n<wxs src="./../tools.wxs" module="tools" />\n<view>{{tools.msg}}</view>\n<view>{{tools.bar(tools.FOO)}}</view>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("页面输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("some msg\n'hello world' from tools.wxs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"require函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require函数"}},[s._v("#")]),s._v(" require函数")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v(".wxs")]),s._v("模块中引用其他 "),a("code",[s._v("wxs")]),s._v(" 文件模块，可以使用 "),a("code",[s._v("require")]),s._v(" 函数。")]),s._v(" "),a("p",[s._v("引用的时候，要注意如下几点：")]),s._v(" "),a("ul",[a("li",[s._v("只能引用 "),a("code",[s._v(".wxs")]),s._v(" 文件模块，且必须使用相对路径。")]),s._v(" "),a("li",[a("code",[s._v("wxs")]),s._v(" 模块均为单例，"),a("code",[s._v("wxs")]),s._v(" 模块在第一次被引用时，会自动初始化为单例对象。多个页面，多个地方，多次引用，使用的都是同一个 "),a("code",[s._v("wxs")]),s._v(" 模块对象。")]),s._v(" "),a("li",[s._v("如果一个 "),a("code",[s._v("wxs")]),s._v(" 模块在定义之后，一直没有被引用，则该模块不会被解析与运行。")])]),s._v(" "),a("p",[a("strong",[s._v("示例代码：")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/s/E4g94Kme6rZ6",target:"_blank",rel:"noopener noreferrer"}},[s._v("在开发者工具中预览效果"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// /pages/tools.wxs\n\nvar foo = "\'hello world\' from tools.wxs";\nvar bar = function (d) {\n  return d;\n}\nmodule.exports = {\n  FOO: foo,\n  bar: bar,\n};\nmodule.exports.msg = "some msg";\n// /pages/logic.wxs\n\nvar tools = require("./tools.wxs");\n\nconsole.log(tools.FOO);\nconsole.log(tools.bar("logic.wxs"));\nconsole.log(tools.msg);\n\x3c!-- /page/index/index.wxml --\x3e\n\n<wxs src="./../logic.wxs" module="logic" />\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("控制台输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("'hello world' from tools.wxs\nlogic.wxs\nsome msg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"wxs-标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wxs-标签"}},[s._v("#")]),s._v(" "),a("code",[s._v("<wxs>")]),s._v(" 标签")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("属性名")]),s._v(" "),a("th",[s._v("类型")]),s._v(" "),a("th",[s._v("默认值")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("module")]),s._v(" "),a("td",[s._v("String")]),s._v(" "),a("td"),s._v(" "),a("td",[s._v("当前 "),a("code",[s._v("<wxs>")]),s._v(" 标签的模块名。必填字段。")])]),s._v(" "),a("tr",[a("td",[s._v("src")]),s._v(" "),a("td",[s._v("String")]),s._v(" "),a("td"),s._v(" "),a("td",[s._v("引用 .wxs 文件的相对路径。仅当本标签为"),a("strong",[s._v("单闭合标签")]),s._v("或"),a("strong",[s._v("标签的内容为空")]),s._v("时有效。")])])])]),s._v(" "),a("h3",{attrs:{id:"module-属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-属性"}},[s._v("#")]),s._v(" module 属性")]),s._v(" "),a("p",[s._v("module 属性是当前 "),a("code",[s._v("<wxs>")]),s._v(" 标签的模块名。在单个 wxml 文件内，建议其值唯一。有重复模块名则按照先后顺序覆盖（后者覆盖前者）。不同文件之间的 wxs 模块名不会相互覆盖。")]),s._v(" "),a("p",[s._v("module 属性值的命名必须符合下面两个规则：")]),s._v(" "),a("ul",[a("li",[s._v("首字符必须是：字母（a-zA-Z），下划线（_）")]),s._v(" "),a("li",[s._v("剩余字符可以是：字母（a-zA-Z），下划线（_）， 数字（0-9）")])]),s._v(" "),a("p",[a("strong",[s._v("示例代码：")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/s/IzgmKKmn6tZ6",target:"_blank",rel:"noopener noreferrer"}},[s._v("在开发者工具中预览效果"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('\x3c!--wxml--\x3e\n\n<wxs module="foo">\n  var some_msg = "hello world"; module.exports = { msg : some_msg, }\n</wxs>\n<view>{{foo.msg}}</view>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("页面输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hello world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("上面例子声明了一个名字为 "),a("code",[s._v("foo")]),s._v(" 的模块，将 "),a("code",[s._v("some_msg")]),s._v(" 变量暴露出来，供当前页面使用。")]),s._v(" "),a("h3",{attrs:{id:"src-属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#src-属性"}},[s._v("#")]),s._v(" src 属性")]),s._v(" "),a("p",[s._v("src 属性可以用来引用其他的 "),a("code",[s._v("wxs")]),s._v(" 文件模块。")]),s._v(" "),a("p",[s._v("引用的时候，要注意如下几点：")]),s._v(" "),a("ul",[a("li",[s._v("只能引用 "),a("code",[s._v(".wxs")]),s._v(" 文件模块，且必须使用相对路径。")]),s._v(" "),a("li",[a("code",[s._v("wxs")]),s._v(" 模块均为单例，"),a("code",[s._v("wxs")]),s._v(" 模块在第一次被引用时，会自动初始化为单例对象。多个页面，多个地方，多次引用，使用的都是同一个 "),a("code",[s._v("wxs")]),s._v(" 模块对象。")]),s._v(" "),a("li",[s._v("如果一个 "),a("code",[s._v("wxs")]),s._v(" 模块在定义之后，一直没有被引用，则该模块不会被解析与运行。")])]),s._v(" "),a("p",[a("strong",[s._v("示例代码：")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developers.weixin.qq.com/s/C7gYFKmh6vZI",target:"_blank",rel:"noopener noreferrer"}},[s._v("在开发者工具中预览效果"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// /pages/index/index.js\n\nPage({\n  data: {\n    msg: "\'hello wrold\' from js",\n  }\n})\n\x3c!-- /pages/index/index.wxml --\x3e\n\n<wxs src="./../comm.wxs" module="some_comms"></wxs>\n\x3c!-- 也可以直接使用单标签闭合的写法\n<wxs src="./../comm.wxs" module="some_comms" />\n--\x3e\n\n\x3c!-- 调用 some_comms 模块里面的 bar 函数，且参数为 some_comms 模块里面的 foo --\x3e\n<view>{{some_comms.bar(some_comms.foo)}}</view>\n\x3c!-- 调用 some_comms 模块里面的 bar 函数，且参数为 page/index/index.js 里面的 msg --\x3e\n<view>{{some_comms.bar(msg)}}</view>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("页面输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("'hello world' from comm.wxs\n'hello wrold' from js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("上述例子在文件 "),a("code",[s._v("/page/index/index.wxml")]),s._v(" 中通过 "),a("code",[s._v("<wxs>")]),s._v(" 标签引用了 "),a("code",[s._v("/page/comm.wxs")]),s._v(" 模块。")]),s._v(" "),a("h3",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" 注意")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<wxs>")]),s._v(" 模块只能在定义模块的 WXML 文件中被访问到。使用 "),a("code",[s._v("<include>")]),s._v(" 或 "),a("code",[s._v("<import>")]),s._v(" 时，"),a("code",[s._v("<wxs>")]),s._v(" 模块不会被引入到对应的 WXML 文件中。")]),s._v(" "),a("li",[a("code",[s._v("<template>")]),s._v(" 标签中，只能使用定义该 "),a("code",[s._v("<template>")]),s._v(" 的 WXML 文件中定义的 "),a("code",[s._v("<wxs>")]),s._v(" 模块。")])])])}),[],!1,null,null,null);e.default=r.exports}}]);