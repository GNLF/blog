(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{877:function(v,t,_){"use strict";_.r(t);var d=_(17),o=Object(d.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"页面路由"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面路由"}},[v._v("#")]),v._v(" 页面路由")]),v._v(" "),_("p",[v._v("在小程序中所有页面的路由全部由框架进行管理。")]),v._v(" "),_("h2",{attrs:{id:"页面栈"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面栈"}},[v._v("#")]),v._v(" 页面栈")]),v._v(" "),_("p",[v._v("框架以栈的形式维护了当前的所有页面。 当发生路由切换的时候，页面栈的表现如下：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("路由方式")]),v._v(" "),_("th",[v._v("页面栈表现")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("初始化")]),v._v(" "),_("td",[v._v("新页面入栈")])]),v._v(" "),_("tr",[_("td",[v._v("打开新页面")]),v._v(" "),_("td",[v._v("新页面入栈")])]),v._v(" "),_("tr",[_("td",[v._v("页面重定向")]),v._v(" "),_("td",[v._v("当前页面出栈，新页面入栈")])]),v._v(" "),_("tr",[_("td",[v._v("页面返回")]),v._v(" "),_("td",[v._v("页面不断出栈，直到目标返回页")])]),v._v(" "),_("tr",[_("td",[v._v("Tab 切换")]),v._v(" "),_("td",[v._v("页面全部出栈，只留下新的 Tab 页面")])]),v._v(" "),_("tr",[_("td",[v._v("重加载")]),v._v(" "),_("td",[v._v("页面全部出栈，只留下新的页面")])])])]),v._v(" "),_("h2",{attrs:{id:"getcurrentpages"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#getcurrentpages"}},[v._v("#")]),v._v(" getCurrentPages()")]),v._v(" "),_("p",[v._v("getCurrentPages() 函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。")]),v._v(" "),_("p",[_("strong",[v._v("注意：不要尝试修改页面栈，会导致路由以及页面状态错误。不要在 App.onLaunch 的时候调用 getCurrentPages()，此时 page 还没有生成。")])]),v._v(" "),_("h2",{attrs:{id:"路由方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#路由方式"}},[v._v("#")]),v._v(" 路由方式")]),v._v(" "),_("p",[v._v("对于路由的触发方式以及页面生命周期函数如下：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("路由方式")]),v._v(" "),_("th",[v._v("触发时机")]),v._v(" "),_("th",[v._v("路由前页面")]),v._v(" "),_("th",[v._v("路由后页面")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("初始化")]),v._v(" "),_("td",[v._v("小程序打开的第一个页面")]),v._v(" "),_("td"),v._v(" "),_("td",[v._v("onLoad, onShow")])]),v._v(" "),_("tr",[_("td",[v._v("打开新页面")]),v._v(" "),_("td",[v._v("调用 API wx.navigateTo 或使用组件")]),v._v(" "),_("td",[v._v("onHide")]),v._v(" "),_("td",[v._v("onLoad, onShow")])]),v._v(" "),_("tr",[_("td",[v._v("页面重定向")]),v._v(" "),_("td",[v._v("调用 API wx.redirectTo 或使用组件")]),v._v(" "),_("td",[v._v("onUnload")]),v._v(" "),_("td",[v._v("onLoad, onShow")])]),v._v(" "),_("tr",[_("td",[v._v("页面返回")]),v._v(" "),_("td",[v._v("调用 API wx.navigateBack 或使用组件或用户按左上角返回按钮")]),v._v(" "),_("td",[v._v("onUnload")]),v._v(" "),_("td",[v._v("onShow")])]),v._v(" "),_("tr",[_("td",[v._v("Tab切换")]),v._v(" "),_("td",[v._v("调用 API wx.switchTab 或使用组件 或用户切换 Tab")]),v._v(" "),_("td",[v._v("各种情况请参考下表")]),v._v(" "),_("td")]),v._v(" "),_("tr",[_("td",[v._v("重启动")]),v._v(" "),_("td",[v._v("调用 API wx.reLaunch 或使用组件")]),v._v(" "),_("td",[v._v("onUnload")]),v._v(" "),_("td",[v._v("onLoad, onShow")])])])]),v._v(" "),_("p",[v._v("Tab 切换对应的生命周期（以 A、B 页面为 Tabbar 页面，C 是从 A 页面打开的页面，D 页面是从 C 页面打开的页面为例）：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("当前页面")]),v._v(" "),_("th",[v._v("路由后页面")]),v._v(" "),_("th",[v._v("触发的生命周期（按顺序）")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("A")]),v._v(" "),_("td",[v._v("A")]),v._v(" "),_("td",[v._v("Nothing happend")])]),v._v(" "),_("tr",[_("td",[v._v("A")]),v._v(" "),_("td",[v._v("B")]),v._v(" "),_("td",[v._v("A.onHide(), B.onLoad(), B.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("A")]),v._v(" "),_("td",[v._v("B（再次打开）")]),v._v(" "),_("td",[v._v("A.onHide(), B.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("C")]),v._v(" "),_("td",[v._v("A")]),v._v(" "),_("td",[v._v("C.onUnload(), A.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("C")]),v._v(" "),_("td",[v._v("B")]),v._v(" "),_("td",[v._v("C.onUnload(), B.onLoad(), B.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("D")]),v._v(" "),_("td",[v._v("B")]),v._v(" "),_("td",[v._v("D.onUnload(), C.onUnload(), B.onLoad(), B.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("D（从转发进入）")]),v._v(" "),_("td",[v._v("A")]),v._v(" "),_("td",[v._v("D.onUnload(), A.onLoad(), A.onShow()")])]),v._v(" "),_("tr",[_("td",[v._v("D（从转发进入）")]),v._v(" "),_("td",[v._v("B")]),v._v(" "),_("td",[v._v("D.onUnload(), B.onLoad(), B.onShow()")])])])])])}),[],!1,null,null,null);t.default=o.exports}}]);