# 常用过滤器

## 时间过滤器

```js
Vue.filter("dateFormat",
    function(value, format='yyyy-MM-dd hh:ss:mm') {
        if(value.toString().length < 13){
             value = value.toString().padEnd(13,'0')*1;
        }
        var date = new Date(Number(value));
        if (/(y+)/.test(format)) {
            format = format.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))
        }
        let o = {
            'M+': date.getMonth() + 1,
            'd+': date.getDate(),
            'h+': date.getHours(),
            'm+': date.getMinutes(),
            's+': date.getSeconds()
        };
        for (let k in o) {
            if (new RegExp(`(${k})`).test(format)) {
                let str = o[k] + '';
                format = format.replace(RegExp.$1, (RegExp.$1.length === 1) ? str : ('00' + str).substr(str.length));
            }
        }
        return format;
    }
);
```

## 货币过滤器

```js
Vue.filter('money',
    //value 数值    currency  货币符号   decimals  保留小数点位数
    function(value, currency, decimals){
          value = parseFloat(value)
          if (!isFinite(value) || (!value && value !== 0)) return ''
          currency = currency != null ? currency : '$'
          decimals = decimals != null ? decimals : 2
          var stringified = Math.abs(value).toFixed(decimals)
          var _int = decimals
            ? stringified.slice(0, -1 - decimals)
            : stringified
          var i = _int.length % 3
          var head = i > 0
            ? (_int.slice(0, i) + (_int.length > 3 ? ',' : ''))
            : ''
          var _float = decimals
            ? stringified.slice(-1 - decimals)
            : ''
          var sign = value < 0 ? '-' : ''
          return sign + currency  + head +
            _int.slice(i).replace(digitsRE, '$1,') +
            _float
            }
)
```

## 姓名保密

```js
//张叁 = 张*   张三三 = 张*三
Vue.filter('name',
    function(data){
        if(data.length == 2){
            return data.replace(/^(.).$/g,"$1*");
        }
        return data.replace(/^(.).+(.)$/g,"$1*$2");
    }
);
```
