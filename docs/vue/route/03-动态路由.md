# 动态路由

我们经常需要把某种模式匹配到的所有路由，全都映射到同个组件。例如，我们有一个 Type 组件，对于所有 信息 各不相同的页面，都要使用这个组件来渲染。那么，我们可以在 vue-router 的路由路径中使用『动态路径参数』来达到这个效果：

```js
const Type = {
  template: '<div>Type</div>'
}
const router = new VueRouter({
  routes: [
    // 动态路径参数 以冒号开头
    { path: '/main/:id', component: Type }
  ]
})
```

现在，像 `/main/Home` 和 `/main/About` 都将映射到相同的路由。

一个『路径参数』使用冒号 : 标记。当匹配到一个路由时，参数值会被设置到 `this.$route.params`，可以在每个组件内使用。于是，我们可以更新模板，输出当前页面的 ID：

```js
const Type = {
  template: '<div>Type {{ $route.params.id }}</div>'
}
```

你可以在一个路由中设置多段『路径参数』，对应的值都会设置到 $route.params 中。例如：

| 模式                          | 匹配路径            | $route.params                      |
| ----------------------------- | ------------------- | ---------------------------------- |
| /user/:username               | /user/evan          | { username: 'evan' }               |
| /user/:username/post/:post_id | /user/evan/post/123 | { username: 'evan', post_id: 123 } |

应用动态路由匹配后的代码：

```html
<body>
    <router-link to="/main/home">Home</router-link>
    <router-link to="/main/type">About</router-link>
</body>
<template id="type">
    <div>Type {{$route.params.id}}</div>
</template>
<script>
const router = new VueRouter({
    routes:[
        {
            path: '/main/:id',
            component: { template: '#type' }
        }
    ]
})
new Vue({
    el:"#app",
    router:router
})
</script>
```

## 匹配优先级

有时候，同一个路径可以匹配多个路由，此时，匹配的优先级就按照路由的定义顺序：**谁先定义的，谁的优先级就最高**。

## 路由信息对象属性

| 属性            | 类型   | 说明                                                         |
| --------------- | ------ | ------------------------------------------------------------ |
| $route.path     | string | 字符串，对应当前路由的路径，总是解析为绝对路径，如 `/main/Home`。 |
| $route.params   | Object | 一个 key/value 对象，包含了 动态片段 和 全匹配片段，如果没有路由参数，就是一个空对象。 |
| $route.query    | Object | 一个 key/value 对象，表示 URL 查询参数。例如，对于路径 `/main?user=1`，则有 `$route.query.user == 1`，如果没有查询参数，则是个空对象。 |
| $route.hash     | string | 当前路由的 hash 值 (带 #) ，如果没有 hash 值，则为空字符串。 |
| $route.fullPath | string | 完成解析后的 URL，包含查询参数和 hash 的完整路径。           |
| $route.params   | Object | 一个 key/value 对象，包含了 动态片段 和 全匹配片段，如果没有路由参数，就是一个空对象。 |

测试路由对象属性：

```html
<div>
    <p>当前路径：{{$route.path}}</p>
    <p>当前参数：{{$route.params}}</p>
    <p>路由名称：{{$route.name}}</p>
    <p>路由查询参数：{{$route.query}}</p>
    <p>路由匹配项：{{$route.matched}}</p>
</div>
```
