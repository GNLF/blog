# 模板

WXML提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。通常项目需要多次使用同一个布局和样式的时候，就可以考虑使用template（模板）来减少冗余代码。

定义模板 使用 name 属性，作为模板的名字。然后在内定义代码片段，如：

```html
<!--
  index: int
  msg: string
  time: string
-->
<template name="msgItem">
  <view>
    <text>{{index}}: {{msg}}</text>
    <text>Time: {{time}}</text>
  </view>
</template>
```

使用模板 使用 is 属性，声明需要的使用的模板，然后将模板所需要的 data 传入，如：

```html
<template is="msgItem" data="{{...item}}" />
Page({
  data: {
    item: {
      index: 0,
      msg: 'this is a template',
      time: '2016-09-15'
    }
  }
})
```

is 属性可以使用 Mustache 语法，来动态决定具体需要渲染哪个模板：

```html
<template name="odd">
  <view>odd</view>
</template>
<template name="even">
  <view>even</view>
</template>

<block wx:for="{{[1, 2, 3, 4, 5]}}">
  <template is="{{item % 2 == 0 ? 'even' : 'odd'}}" />
</block>
```

模板的作用域 模板拥有自己的作用域，只能使用 data 传入的数据以及模板定义文件中定义的 模块。

## 使用方法

接下我们将之前小程序视图层一节中的排序rank.wxml页，引入一个列表模板list，将每一个人的信息模块封装为一个模块。

- 在根目录中新建template文件夹用来存放通用模板。
- 在文件夹里面新建一个wxml，wxss,进行模板和样式的定义。
- 设置模板的name，以及里面您需要定义的wxml内容

```html
<!--list.wxml-->
<template  name='ranklist'>
      <view class="message">
        <view class="label">演讲人员：</view>
        <view class="name">{{item.user_name}}</view>
      </view>
      <view class="message">
        <view class="label">演讲题目：</view>
        <view class="name">{{item.user_speech_name}}</view>
      </view>
      <view class="message">
        <view class="label">所在小组：</view>
        <view class="name">{{item.dept_name}}</view>
      </view>
      <view class="message">
        <view class="label">评分人数：</view>
        <view class="name">{{item.n}}</view>
      </view>
      <view class="scor">
         <view class="title">比赛成绩</view>
         <view class="number">{{item.total*1}}</view>
      </view>
</template>
```

- 设置wxss样式

```css
// template/list.css

.item {
  width: 704rpx;
  height: 357rpx;
  background: #fff;
  margin: 0 auto 30rpx;
  border-radius: 15rpx;
  border-top: 15rpx solid #75d77c;
  padding-top: 40rpx;
}

.message {
  width: 635rpx;
  height: 29rpx;
  margin: 0 auto 22rpx;
  line-height: 29rpx;
  color: #b8b8b8;
  font-size: 26rpx;
}

.label {
  float: left;
}

.name {
  float: right;
}

.scor {
  width: 635rpx;
  height: 42rpx;
  margin: 50rpx auto 0;
  line-height: 42rpx;
}

.title {
  float: left;
  font-size: 24rpx;
  font-weight: bold;
  color:#737373;
}

.number {
  float: right;
  font-size: 30rpx;
  color: #22a7ff;
}
```

- 在需要使用的页面使用import导入该wxml页面，注意路径位置

```html
<import src="../../template/list.wxml" />
<view class="bg">
   <view class='item' wx:for="{{data}}">
      <template is="ranklist" data="{{item}}"></template>
   </view>
</view>
Page({
  data:{
    data:[
      {user_name:'杨世杰',user_speech_name:'uek实习总结',dept_name:'第一组',n:8,total:85.125},
      {user_name:'陈浩',user_speech_name:'uek实习总结',dept_name:'第六组',n:8,total:84.625},
      {user_name:'梁亦君',user_speech_name:'uek实习总结',dept_name:'第四组',n:8,total:84.125},
    ]
  }
})
```

- 在需要使用的wxss文件导入该wxss

```css
@import '../../template/list.wxss';
.bg {
  width: 100vw;
  min-height: 100vh;
  background: #f0f7fb;
  padding-top: 32rpx;
  padding-bottom:32rpx;
}
```

- 在页面上使用该模板，通过is判断使用哪个模板,这里我们使用name为list模板（此处使用的是列表循环，所以data值为item）。 若将data使用ES6 展开运算符‘...’，则模板里面绑定数据就不需要在前面加入item了。

```html
     <!--list.wxml-->
     <template  name='ranklist'>
         <view class="message">
           <view class="label">演讲人员：</view>
           <view class="name">{{user_name}}</view>
         </view>
         <view class="message">
           <view class="label">演讲题目：</view>
           <view class="name">{{user_speech_name}}</view>
         </view>
         <view class="message">
           <view class="label">所在小组：</view>
           <view class="name">{{dept_name}}</view>
         </view>
         <view class="message">
           <view class="label">评分人数：</view>
           <view class="name">{{n}}</view>
         </view>
         <view class="scor">
            <view class="title">比赛成绩</view>
            <view class="number">{{total}}</view>
         </view>
     </template>
```


  