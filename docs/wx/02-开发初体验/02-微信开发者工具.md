# 微信开发者工具

为了帮助开发者简单和高效地开发和调试微信小程序，我们在原有的公众号网页调试工具的基础上，推出了全新的 微信开发者工具，集成了公众号网页调试和小程序调试两种开发模式。

使用小程序调试，开发者可以完成小程序的 API 和页面的开发调试、代码查看和编辑、小程序预览和发布等功能。

## 创建项目

打开微信开发者工具，选择“小程序项目”，点击“+”创建一个小程序项目。

- 项目目录: 小程序项目文件夹所创建的目录
- AppID: 每个小程序项目都有一个唯一的AppID。登录 (微信公众平台)[[https://mp.weixin.qq.com\]，可以在菜单](https://mp.weixin.qq.xn--com]%2C-tk2h68xf9ag6pz34j/) `“设置” - “开发设置”` 看到小程序的 AppID 。
- 项目名称: 即创建的项目文件夹名称 (非小程序名称)
- 如果所选`项目目录`是空文件夹，创建时可选 “建立普通快速启动模板”，快速创建一个项目。

![小程序创建](https://mp.hnz.kim/assets/001/003-1546414811000.png)

项目创建完成后即可在开发者工具中预览自己的项目，或点击上方菜单中的 “预览”或“真机调试”按钮，通过微信的扫一扫在手机微信中体验该小程序。

## 开发者工具主界面

(开发者工具界面介绍)[<https://developers.weixin.qq.com/miniprogram/dev/devtools/page.html>]

## 代码编辑

工具目前提供了 5 种文件的编辑：`wxml`、`wxss`、`js`、`json`、`wxs` 以及图片文件的预览。

文件可直接在工具中进行编辑，并且文件编辑后可直接在工具中预览效果。

![代码编辑](https://mp.hnz.kim/assets/001/003-1546415502000.png)

开发语法详见下一节。

## 项目预览

### 1. 工具自带的模拟器预览

开发者工具模拟器可以模拟微信小程序在客户端真实的逻辑表现，对于绝大部分的 API 均能够在模拟器上呈现出正确的状态。

模拟器上方菜单选项功能依次为：

1. 选择需要模拟设备
2. 界面缩放比例 (不影响布局)
3. 网络情况
4. 模拟手势操作 (返回键或Home键)
5. 是否静音
6. 模拟器独立窗口显示
7. 模拟器左右位置

![模拟器](https://mp.hnz.kim/assets/001/003-1546416376000.png)

在代码编辑时，保存代码会自动进行编译并将效果预览到模拟其中。 也可以点击工具上方的`“编译”`按钮进行手动编译。

在编译时，可以选择编译模式：修改启动页、添加页面参数、修改启动场景等。

![编译模式](https://mp.hnz.kim/assets/001/003-1546417366000.png) ![自定义编译条件](https://mp.hnz.kim/assets/001/003-1546417388000.png)

### 2. 真机预览

通过工具顶部的`“预览”`按钮可以在移动设备上查看项目预览。

![预览](https://mp.hnz.kim/assets/001/003-1546417710000.png)

1. **扫描二维码预览：** 微信扫描二维码查看当前项目的预览
2. 自动预览：

实现编写小程序时快速预览，免去了每次查看小程序效果时都要扫码或者使用小程序开发助手的麻烦。只需按下快捷键（

```
   shift + ctrl + p
```

），保持前台运行的微信即可自动唤出或刷新小程序。 (需要配合 6.6.7 及以上的微信客户端版本)

- 自动预览成功时，工具栏上的预览图标会显示为一个绿勾。如果预览出错，则会显示为一个红色惊叹号，可以点击查看详情。
- 注意，自动预览功能仅限与登陆开发者工具的同帐号微信使用。

## 项目调试

### 1. 开发者工具中调试

在开发者工具中，提供了和 谷歌浏览器控制台类似的功能，可以在控制台中进行调试。 [调试工具官方文档](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7)

| 文件    | 功能                                                      | 官方使用说明                                                 |
| ------- | --------------------------------------------------------- | ------------------------------------------------------------ |
| Wxml    | 查看页面编译完成之后的结构 (同览器中的Document)           | [Wxml使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#wxml-panel) |
| Console | 控制台，查看输出信息以及输入调试命令(同浏览器中的Console) | [Console使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#console-panel) |
| Sources | 查看项目中的脚本文件                                      | [Sources使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#sources-panel) |
| Network | 观察和显示 request 和 socket 的请求情况                   | [Network使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#network-panel) |
| AppData | 显示和修改当前项目运行时小程序 AppData 具体数据           | [AppData使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#appdata-panel) |
| Storage | 删除、新增、修改本地存储                                  | [Storage使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#storage-panel) |
| Sensor  | 模拟地理位置、模拟移动设备重力感应                        | [Sensor使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/debug.html#sensor-panel) |
| Trace   | 性能测试工具                                              | [Trace使用说明](https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tools.html?search-key=Trace) |
| Audits  | 体验评分，分析并定位小程序中可能导致体验不好的地方        | [Audits使用说明](https://developers.weixin.qq.com/miniprogram/dev/devtools/audits.html) |

### 2. 真机调试

真机远程调试功能可以实现直接利用开发者工具，通过网络连接，对手机上运行的小程序进行调试，帮助开发者更好的定位和查找在手机上出现的问题。点击开发工具上方 `“真机调试”` 按钮，微信扫描二维码可以实现真机调试。

开发者可以在调试器里直接进行代码的调试，并查看 `Storage` 存储情况；在 `Console` 面板里查看输出及错误；在 `Sources` 面板里查看小程序的源代码并进行断点单步调试；右侧信息视图则可以查看目前与手机和服务器的连接情况，以及发生的错误信息等。

![真机调试](https://mp.hnz.kim/assets/001/003-1546420329000.png)

要结束调试，直接关闭调试窗口，或点击窗口右下角 “结束调试” 按钮即可。

## 项目发布

### 1. 添加小程序后台管理成员(可选)

管理员可在小程序管理后台统一管理项目成员（包括开发者、体验者及其他成员）、设置项目成员的权限，包括：开发者/体验者权限、登录小程序管理后台、开发管理、查看小程序数据分析等。

入口位于：`[小程序管理后台](https://mp.weixin.qq.com/) - 用户身份 – 成员管理`

![权限说明](https://mp.hnz.kim/assets/001/003-1546421761000.png)

- 登录：可登录小程序管理后台，无需管理员确认
- 数据分析：使用小程序统计模块功能查看小程序数据
- 微信支付：使用小程序微信支付（虚拟支付）模块
- 推广：使用小程序流量主、广告主模块
- 开发管理：小程序提交审核、发布、回退
- 开发设置：设置小程序服务器域名、消息推送及扫描普通链接二维码打开小程序
- 暂停服务设置：暂停小程序线上服务
- 解除关联公众号：可解绑小程序已关联的公众号
- 小程序插件：可进行小程序插件开发管理和设置
- 游戏运营管理：可使用小游戏管理后台的素材管理、游戏圈管理等功能

### 2. 上传代码

小程序上线前，需要先将代码上传进行审核。

点击开发者工具顶部操作栏的`“上传”`按钮，填写版本号以及项目备注进行上传。 (这里版本号以及项目备注是为了方便管理员检查版本使用的，开发者可以根据自己的实际要求来填写这两个字段)

上传成功之后，登录`[小程序管理后台](https://mp.weixin.qq.com/) - 开发管理 - 开发版本` 就可以找到刚提交上传的版本了。

可以将这个版本设置 `体验版` 或者是 `提交审核`。

![代码上传](https://mp.hnz.kim/assets/001/003-1546422029000.png)

### 3. 提交审核

将代码上传之后，点击`提交审核`，填写相关信息后即可对代码进行审核，验证小程序的质量，以及是否符合相关的规范。

![提交审核](https://mp.hnz.kim/assets/001/003-1546422336000.png)

小程序审核时间约为几小时，所以提交审核时需要对代码严格测试，否则过多的审核不通过，可能会影响后续的时间。

审核注意事项：

1. 小程序名称要与简介的信息及内容相关
2. 服务类目要对应微信小程序页面内容
3. 产品的功能不能有bug
4. 不得展示和推荐第三方小程序
5. 不能含有诱导分享的内容

### 4. 发布

审核通过之后，管理员的微信中会收到小程序通过审核的通知，此时登录 `[小程序管理后台](https://mp.weixin.qq.com/) - 开发管理 - 审核版本`中可以看到通过审核的版本。点击发布，即可发布小程序。

### 5. 运营数据统计

登录 `[小程序管理后台](https://mp.weixin.qq.com/) - 统计` 中可以看到小程序的访问记录、来源分析、用户画像等信息。

![运营数据](https://mp.hnz.kim/assets/001/003-1546422969000.png)


  