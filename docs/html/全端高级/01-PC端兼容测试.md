# PC端兼容测试

所谓的浏览器兼容性问题，是指因为不同的浏览器对同一段代码有不同的解析，造成页面显示效果不统一的情况。在大多数情况下，我们的需求是，无论用户用什么浏览器来查看我们的网站或者登陆我们的系统，都应该是统一的显示效果。所以浏览器的兼容性问题是前端开发人员经常会碰到和必须要解决的问题。

## 前端开发人员分类

前端开发人员划分为两类：

### 优秀前端开发工程师

优秀前端开发工程师技术理解深入，能够精确按照设计图开发，可以说是精确到1px的，他们很容易就会发现设计图的不足，分析页面布局合理，技术使用得当，很少碰到浏览器的兼容性问题。若遇到效果不一致这些问题往往都是浏览器的bug，并且他们制作的页面后期易维护，代码问题少，可以说是比较牢固放心的代码。

### 一般前端开发工程师

一般前端开发工程师技术理解一般，对自己要求不严格，基本按照设计图开发，很多细枝末节差距交大，例如间距，行高，图片位置等等经常会差几px。某种效果的实现也是反复调试得到，具体为什么出现这种效果还模模糊糊，整体布局不合理，代码十分脆弱稍有改动就乱七八糟。代码为什么这么写还不知所以然。这类开发人员往往经常为兼容性问题所困。修改好了这个浏览器又乱了另一个浏览器。改来改去也毫无头绪。其实他们碰到的兼容性问题大部分不应该归咎于浏览器，而是他们的技术本身了。

## 查看兼容问题的方法

去下面这个网页可以查看一些标签和css属性的兼容情况，不确定是否兼容的时候可以去查看 
[点击查看](https://www.caniuse.com/)

## PC端兼容问题

> CSS网站设计的浏览器兼容性问题比较突出各个浏览器对CSS的支持略有不同，但这些细小的不同也会使网站在各个浏览器中有较大的显示差异，甚至是面目全非，所以我们要学会如何处理这些问题。

针对以下情况：

- 不同浏览器的标签默认样式不统一
- img标签底部间隙问题
- a标签包裹img标签在IE6-10下图片有边框
- IE6-8不支持HTML5新增标签

> 针对以上的问题可以引入库文件 `u-reset.css`进行统一解决。

| 名称                                                 | 版本                                                         | 描述                 | 下载                                      | 大小                                                         | 压缩大小                                                     |
| ---------------------------------------------------- | ------------------------------------------------------------ | -------------------- | ----------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| [u-reset.css](https://github.com/allcky/u-reset.css) | [![u-reset.css-status](https://img.shields.io/npm/v/u-reset.css.svg)](https://npmjs.com/package/u-reset.css) | 一个简洁的重置样式库 | [点击下载](https://unpkg.com/u-reset.css) | ![u-reset.css-size](https://packagephobia.now.sh/badge?p=u-reset.css) | ![npm-minsize](https://img.shields.io/bundlephobia/min/u-reset.css.svg) |

### 不同浏览器的标签默认样式不统一

解决方案：清除默认样式，保证在每个浏览器样式统一。

```css
body,p,ul,h1,h2,h3,h4,h5,h6,ol,dl,dd,form,input,ul,ol{
margin:0;padding:0;list-style:none;font-weight:normal;
}
img{border:none;}
```

### img标签底部间隙问题

- 问题：div中包含一张图片，底部可能有2px 4px或更多的间隙，不同font-size会影响这个间隙的大小。
- 解决：
  1. 将图片的垂直对齐方式vertical-align，值为top或bottom；
  2. 将图片转换为块标签，display:block；
  3. 将包含图片的父容器的字体大小设为零，font-size:0；

### img标签IE下图片有边框

- 问题：html 图片img加了超链接（a标签）之后产生难看的蓝色边框！（IE6-10）
- 解决：img{border:0;}

### margin-top没有加到指定元素身上

- 问题：在一个容器中给子元素一个上边距，父元素和子元素一起往下移动这是一个bug。
- 解决：
  1. 通过给父元素一个像素的透明边框:border:1px solid rgba(0,0,0,0);
  2. 通过给父元素一个:padding-top来模拟margin-top;

### 父容器（子元素浮动）高度为0

- 问题：父元素的高度不确定，且子元素个数不确定、而且还是float，会引发父元素高度为0问题，浮动的子元素层级高于父元素导致撑不开父元素的高度!
- 解决：
  1. 在使用float元素的父元素结束前加一个高为0宽为0且有clear:both样式的空div `<div style="clear:both;"></div>`
  2. 在父容器上添加overflow:hidden

### 兼容ie9需要特别注意

1. 在html中引入所需css文件，要添加类型 `type="text/css"`
2. ie9及以下不支持`display:flex;`和`display:grid;`布局，网页需要兼容ie9则不能使用。
3. `@keyframes` `linear-gradient` `text-shadow` `multiple columns` `gradients` 属性在ie6-9都不支持
4. `transition` `border-image` 属性在ie6-10都不支持
5. `transform`2d转换属性不支持ie6-8，ie9需要加前缀来支持
6. H5标签不支持ie9以下版本浏览器,`main`标签不支持ie9-11;
7. calc 属性IE9部分支持,IE6-8都不支持

### 兼容ie8需要特别注意

1. 因为IE8加入了“兼容性视图”功能，这样的话就可以在IE8中就会使用IE6或IE7的内核渲染页面。使用meta标签来强制IE8使用最新的内核渲染页面`<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">`
2. `box-shadow` `border-radius` 属性在ie6-8都不支持
3. IE8不支持last-child
4. IE8不支持background-size: cover设置全屏背景 5.

### 兼容ie6需要特别注意

#### IE6双倍边距 bug

- 问题：当我们给元素添加浮动的并指定左外边距的时候，IE6会出现双倍边距

- 解决：给浮动的元素指定 display:inline;

  #### IE6下png图片不支持透明度

- 问题：在ie6下png图片不支持透明度

- 解决：

  ```css
  filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=image,src="opacity.png");
  _background:none;
  ```

#### IE6不支持固定定位

- 问题：IE6不支持固定定位；（利用绝对定位模拟固定定位）
- 解决：

```css
选择器{
  width:200px;height:200px;background:red;
  position:fixed;bottom:50px;right:50px;
  *position:absolute;
  *top:expression(eval(document.documentElement.scrollTop+200));
}
*html{
  background-image:url(blank:about);
  background-attachment:absolute;
}
```

#### IE6对!important不能很好的支持

在同一个选择器(即同一个{})内有重复的属性的话，此选择器内的此属性的 !important 在 IE6 里无效。

#### IE6百分比问题

IE6在解析百分比时，会按四舍五入方式计算从而导致50%加50%大于100%的情况

#### CSS选择器问题

IE6不支持子选择器

#### IE6中元素具有href属性才能触发hover

#### IE6调整窗口大小的Bug

当把body居中放置，改变IE浏览器大小的时候，任何在body里面的相对定位元素都会固定不动了。解决办法：给body定义position:relative;就行了。

#### IE6下子元素超出父级宽高，会把父级的宽高撑开

不要使得子元素超过父元素，或者使用`overflow：hidden`

## CSS hack

- 各浏览器兼容CSS

```css
.bb{
    background-color:#f1ee18; /*所有识别*/
    background-color:#00deff\9; /*IE6、7、8识别*/
    +background-color:#a200ff; /*IE6、7识别*/
    _background-color:#1e0bd1; /*IE6识别*/
  }
```

![css hack表](http://layout.hnz.kim/amWiki/images/hack.jpg)